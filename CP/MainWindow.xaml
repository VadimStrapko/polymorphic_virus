<Window x:Class="CP.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Virus Control Panel" Height="700" Width="1340"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <StackPanel Grid.Row="0" Background="#FF2C3E50" Margin="0,0,0,10">
            <TextBlock Text="🦠 POLYMORPHIC VIRUS CONTROL PANEL" 
                      FontSize="20" FontWeight="Bold" Foreground="White"
                      HorizontalAlignment="Center" Margin="10"/>
            <TextBlock Text="Educational Project - For Research Purposes Only" 
                      FontSize="12" Foreground="#FFBDC3C7" 
                      HorizontalAlignment="Center" Margin="0,0,0,10"/>
        </StackPanel>

        <!-- Панель управления -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="10" Background="#FFF8F9FA">
            <Button x:Name="btnLaunchAttack" Content="🚀 Launch Test Attack" 
                    Click="BtnLaunchAttack_Click" Margin="5" Padding="15,8"
                    Background="#FFE74C3C" Foreground="White" FontWeight="Bold"
                    ToolTip="Simulate encryption attack on local machine"/>

            <Button x:Name="btnRestoreFiles" Content="🛡️ Restore Files" 
                    Click="BtnRestoreFiles_Click" Margin="5" Padding="15,8"
                    Background="#FF2ECC71" Foreground="White" FontWeight="Bold"
                    ToolTip="Decrypt files with encryption key"/>

            <Button x:Name="btnCopyTools" Content="📦 Copy Attack Tools" 
                    Click="BtnCopyTools_Click" Margin="5" Padding="15,8"
                    Background="#FF3498DB" Foreground="White" FontWeight="Bold"
                    ToolTip="Copy Encryptor.exe and Decryptor.exe to target folder"/>

            <Button x:Name="btnRefresh" Content="🔄 Refresh Data" 
                    Click="BtnRefresh_Click" Margin="5" Padding="15,8"
                    Background="#FF9B59B6" Foreground="White" FontWeight="Bold"/>

            <TextBlock x:Name="txtStatus" Margin="10" VerticalAlignment="Center" 
                      FontWeight="Bold" Foreground="#FF2C3E50"/>
        </StackPanel>

        <!-- Основной контент -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Таблица жертв -->
            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                <TextBlock Text="📊 INFECTED SYSTEMS MONITOR" FontSize="16" FontWeight="Bold"
                          Margin="0,0,0,10" Foreground="#FF2C3E50"/>

                <DataGrid x:Name="dgVictims" Height="400"
                          AutoGenerateColumns="False" IsReadOnly="True"
                          AlternatingRowBackground="#FFF5F5F5">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="🖥️ Computer" Binding="{Binding ComputerName}" Width="120"/>
                        <DataGridTextColumn Header="👤 User" Binding="{Binding UserName}" Width="100"/>
                        <DataGridTextColumn Header="🌐 IP Address" Binding="{Binding IPAddress}" Width="110"/>
                        <DataGridTextColumn Header="📁 Encrypted Files" Binding="{Binding FilesEncrypted}" Width="100"/>
                        <DataGridTextColumn Header="⏰ Infection Time" Binding="{Binding InfectionTime}" Width="130"/>
                        <DataGridTextColumn Header="📊 Status" Binding="{Binding Status}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Padding" Value="5,2"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Status}" Value="Infected">
                                            <Setter Property="Background" Value="#FFE74C3C"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Status}" Value="Decrypted">
                                            <Setter Property="Background" Value="#FF2ECC71"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Status}" Value="Paid">
                                            <Setter Property="Background" Value="#FFF39C12"/>
                                            <Setter Property="Foreground" Value="White"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="🔑 Encryption Key" Binding="{Binding EncryptionKey}" Width="200"/>
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>

            <!-- Боковая панель с информацией -->
            <StackPanel Grid.Column="1" Background="#FFF8F9FA" Margin="10">
                <TextBlock Text="⚙️ ATTACK CONTROLS" FontSize="14" FontWeight="Bold" 
                          Margin="0,0,0,10" Foreground="#FF2C3E50"/>

                <Border BorderBrush="#FFBDC3C7" BorderThickness="1" CornerRadius="5" 
                        Padding="10" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="Target Folder:" FontWeight="Bold"/>
                        <TextBox x:Name="txtTargetFolder" Text="C:\Users\admin\Desktop\files" 
                                Margin="0,5,0,10" IsReadOnly="True"/>

                        <TextBlock Text="Last Encryption Key:" FontWeight="Bold"/>
                        <TextBox x:Name="txtLastKey" Text="" Margin="0,5,0,10" 
                                IsReadOnly="True" FontFamily="Consolas"/>

                        <Button x:Name="btnShowFolder" Content="📂 Open Target Folder" 
                                Click="BtnShowFolder_Click" Margin="0,5" Padding="10,5"/>
                    </StackPanel>
                </Border>

                <Border BorderBrush="#FFBDC3C7" BorderThickness="1" CornerRadius="5" 
                        Padding="10" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="📈 STATISTICS" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBlock x:Name="txtStats" Text="Total victims: 0" FontSize="12"/>
                        <TextBlock x:Name="txtInfectedStats" Text="Currently infected: 0" FontSize="12"/>
                        <TextBlock x:Name="txtFilesStats" Text="Total files encrypted: 0" FontSize="12"/>
                    </StackPanel>
                </Border>

                <Border BorderBrush="#FFBDC3C7" BorderThickness="1" CornerRadius="5" 
                        Padding="10">
                    <StackPanel>
                        <TextBlock Text="⚠️ WARNING" FontWeight="Bold" Foreground="#FFE74C3C"/>
                        <TextBlock Text="This is an educational project for studying polymorphic viruses. Do not use for illegal purposes." 
                                  TextWrapping="Wrap" FontSize="10" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
</Window>